{"ast":null,"code":"import _slicedToArray from\"D:/Foodgram/foodgram/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"./styles.module.css\";import{useState}from\"react\";import{Button,LinkComponent,Popup}from\"../index\";import DefaultImage from\"../../images/userpic-icon.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var countForm=function countForm(number,titles){number=Math.abs(number);if(Number.isInteger(number)){var cases=[2,0,1,1,1,2];return titles[number%100>4&&number%100<20?2:cases[number%10<5?number%10:5]];}return titles[1];};var Subscription=function Subscription(_ref){var email=_ref.email,first_name=_ref.first_name,last_name=_ref.last_name,username=_ref.username,removeSubscription=_ref.removeSubscription,recipes_count=_ref.recipes_count,id=_ref.id,recipes=_ref.recipes,avatar=_ref.avatar;var shouldShowButton=recipes_count>3;var moreRecipes=recipes_count-3;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),toDelete=_useState2[0],setToDelete=_useState2[1];return/*#__PURE__*/_jsxs(\"div\",{className:styles.subscription,children:[toDelete&&/*#__PURE__*/_jsx(Popup,{title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u043E\\u0442\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F?\",onSubmit:function onSubmit(){removeSubscription({id:id,callback:function callback(){setToDelete(false);}});},onClose:function onClose(){setToDelete(false);}}),/*#__PURE__*/_jsx(\"div\",{className:styles.subscriptionHeader,children:/*#__PURE__*/_jsxs(\"h2\",{className:styles.subscriptionTitle,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.subscriptionAvatar,style:{\"background-image\":\"url(\".concat(avatar||DefaultImage,\")\")}}),/*#__PURE__*/_jsx(LinkComponent,{className:styles.subscriptionRecipeLink,href:\"/user/\".concat(id),title:\"\".concat(first_name,\" \").concat(last_name)})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.subscriptionBody,children:/*#__PURE__*/_jsxs(\"ul\",{className:styles.subscriptionItems,children:[recipes.map(function(recipe){return/*#__PURE__*/_jsx(\"li\",{className:styles.subscriptionItem,children:/*#__PURE__*/_jsx(LinkComponent,{className:styles.subscriptionRecipeLink,href:\"/recipes/\".concat(recipe.id),title:/*#__PURE__*/_jsxs(\"div\",{className:styles.subscriptionRecipe,children:[/*#__PURE__*/_jsx(\"img\",{src:recipe.image,alt:recipe.name,className:styles.subscriptionRecipeImage}),/*#__PURE__*/_jsx(\"h3\",{className:styles.subscriptionRecipeTitle,children:recipe.name}),/*#__PURE__*/_jsxs(\"p\",{className:styles.subscriptionRecipeText,children:[recipe.cooking_time,\" \\u043C\\u0438\\u043D.\"]})]})})},recipe.id);}),shouldShowButton&&/*#__PURE__*/_jsx(\"li\",{className:styles.subscriptionMore,children:/*#__PURE__*/_jsx(LinkComponent,{className:styles.subscriptionLink,title:\"\\u0415\\u0449\\u0435 \".concat(moreRecipes,\" \").concat(countForm(moreRecipes,[\"рецепт\",\"рецепта\",\"рецептов\"]),\"...\"),href:\"/user/\".concat(id)})})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.subscriptionFooter,children:/*#__PURE__*/_jsxs(Button,{className:styles.subscriptionButton,clickHandler:function clickHandler(_){setToDelete(true);},children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"20\",viewBox:\"0 0 16 20\",fill:\"none\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M14 10H2\",stroke:\"black\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"})}),\"\\u041E\\u0442\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F\"]})})]});};export default Subscription;","map":{"version":3,"names":["styles","useState","Button","LinkComponent","Popup","DefaultImage","countForm","number","titles","Math","abs","Number","isInteger","cases","Subscription","email","first_name","last_name","username","removeSubscription","recipes_count","id","recipes","avatar","shouldShowButton","moreRecipes","toDelete","setToDelete","subscription","callback","subscriptionHeader","subscriptionTitle","subscriptionAvatar","subscriptionRecipeLink","subscriptionBody","subscriptionItems","map","recipe","subscriptionItem","subscriptionRecipe","image","name","subscriptionRecipeImage","subscriptionRecipeTitle","subscriptionRecipeText","cooking_time","subscriptionMore","subscriptionLink","subscriptionFooter","subscriptionButton","_"],"sources":["D:/Foodgram/foodgram/frontend/src/components/subscription/index.js"],"sourcesContent":["import styles from \"./styles.module.css\";\r\nimport { useState } from \"react\";\r\nimport { Button, LinkComponent, Popup } from \"../index\";\r\nimport DefaultImage from \"../../images/userpic-icon.jpg\";\r\n\r\nconst countForm = (number, titles) => {\r\n  number = Math.abs(number);\r\n  if (Number.isInteger(number)) {\r\n    let cases = [2, 0, 1, 1, 1, 2];\r\n    return titles[\r\n      number % 100 > 4 && number % 100 < 20\r\n        ? 2\r\n        : cases[number % 10 < 5 ? number % 10 : 5]\r\n    ];\r\n  }\r\n  return titles[1];\r\n};\r\n\r\nconst Subscription = ({\r\n  email,\r\n  first_name,\r\n  last_name,\r\n  username,\r\n  removeSubscription,\r\n  recipes_count,\r\n  id,\r\n  recipes,\r\n  avatar,\r\n}) => {\r\n  const shouldShowButton = recipes_count > 3;\r\n  const moreRecipes = recipes_count - 3;\r\n  const [toDelete, setToDelete] = useState(false);\r\n\r\n  return (\r\n    <div className={styles.subscription}>\r\n      {toDelete && (\r\n        <Popup\r\n          title=\"Вы уверены, что хотите отписаться?\"\r\n          onSubmit={() => {\r\n            removeSubscription({\r\n              id,\r\n              callback: () => {\r\n                setToDelete(false);\r\n              },\r\n            });\r\n          }}\r\n          onClose={() => {\r\n            setToDelete(false);\r\n          }}\r\n        />\r\n      )}\r\n      <div className={styles.subscriptionHeader}>\r\n        <h2 className={styles.subscriptionTitle}>\r\n          <div\r\n            className={styles.subscriptionAvatar}\r\n            style={{\r\n              \"background-image\": `url(${avatar || DefaultImage})`,\r\n            }}\r\n          />\r\n          <LinkComponent\r\n            className={styles.subscriptionRecipeLink}\r\n            href={`/user/${id}`}\r\n            title={`${first_name} ${last_name}`}\r\n          />\r\n        </h2>\r\n      </div>\r\n      <div className={styles.subscriptionBody}>\r\n        <ul className={styles.subscriptionItems}>\r\n          {recipes.map((recipe) => {\r\n            return (\r\n              <li className={styles.subscriptionItem} key={recipe.id}>\r\n                <LinkComponent\r\n                  className={styles.subscriptionRecipeLink}\r\n                  href={`/recipes/${recipe.id}`}\r\n                  title={\r\n                    <div className={styles.subscriptionRecipe}>\r\n                      <img\r\n                        src={recipe.image}\r\n                        alt={recipe.name}\r\n                        className={styles.subscriptionRecipeImage}\r\n                      />\r\n                      <h3 className={styles.subscriptionRecipeTitle}>\r\n                        {recipe.name}\r\n                      </h3>\r\n                      <p className={styles.subscriptionRecipeText}>\r\n                        {recipe.cooking_time} мин.\r\n                      </p>\r\n                    </div>\r\n                  }\r\n                />\r\n              </li>\r\n            );\r\n          })}\r\n          {shouldShowButton && (\r\n            <li className={styles.subscriptionMore}>\r\n              <LinkComponent\r\n                className={styles.subscriptionLink}\r\n                title={`Еще ${moreRecipes} ${countForm(moreRecipes, [\r\n                  \"рецепт\",\r\n                  \"рецепта\",\r\n                  \"рецептов\",\r\n                ])}...`}\r\n                href={`/user/${id}`}\r\n              />\r\n            </li>\r\n          )}\r\n        </ul>\r\n      </div>\r\n      <div className={styles.subscriptionFooter}>\r\n        <Button\r\n          className={styles.subscriptionButton}\r\n          clickHandler={(_) => {\r\n            setToDelete(true);\r\n          }}\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"16\"\r\n            height=\"20\"\r\n            viewBox=\"0 0 16 20\"\r\n            fill=\"none\"\r\n          >\r\n            <path\r\n              d=\"M14 10H2\"\r\n              stroke=\"black\"\r\n              stroke-width=\"2\"\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n            />\r\n          </svg>\r\n          Отписаться\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Subscription;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}